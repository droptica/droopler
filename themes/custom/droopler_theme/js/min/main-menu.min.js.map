{"version":3,"file":"main-menu.min.js","sources":["main-menu.js"],"sourcesContent":["/**\n * @file\n * Main menu operation.\n */\n(function ($, Drupal) {\n\n  \"use strict\";\n  var $clearStyling = false;\n\n  Drupal.behaviors.mainMenuMobileOperations = {\n    attach: function (context, settings) {\n      var $block = $('.we-mega-menu-submenu .block-block-content', context);\n      var $titles = $('.field--name-field-d-main-title', $block);\n\n      if ($titles.length) {\n        var breakpointDesktop = 992;\n        var blockContentClass = '.field--name-field-d-long-text';\n\n        $titles.click(function() {\n          if (window.innerWidth < breakpointDesktop) {\n            $(this).toggleClass('open').parent().find(blockContentClass).slideToggle('medium', function () {\n              if ($(this).is(':hidden')) {\n                $clearStyling = true;\n              }\n            });\n\n            return false;\n          }\n        });\n      }\n    }\n  };\n\n  /**\n   * Adds body tag class when mobile sidebar is opened.\n   * Required for disabling body scroll and adding overlay.\n   *\n   * @type {{attach: Drupal.behaviors.mainMenuMobileNavbarListener.attach}}\n   */\n  Drupal.behaviors.mainMenuMobileNavbarListener = {\n    attach: function (context, settings) {\n      $ ('#navbar-main button.navbar-toggler', context).click(function() {\n        if (!$('.navbar').hasClass('collapsing')) {\n          $('body').toggleClass('navbar-open');\n          $('.navbar').toggleClass('open');\n          $('html, body').stop().animate({scrollTop: 0}, 500);\n          $(this).attr('aria-expanded', ($(this).attr('aria-expanded') === 'false'));\n        }\n      });\n\n      // Close sidebar when clicked overflowed content.\n      $('.main-navbar', context).click(function(e) {\n        var $clickTarget = $(e.target);\n        if ($clickTarget.parents('.navbar-inner').length == 0 && $clickTarget.is('.navbar-inner') == false) {\n          $ ('#navbar-main button.navbar-toggler:visible', context).click();\n        }\n      });\n    }\n  };\n\n  /**\n   * Adding toggle behavior for sidebar menu items having submenus.\n   *\n   * @type {{attach: Drupal.behaviors.mainMenuMobileSubmenuToggle.attach}}\n   */\n  Drupal.behaviors.mainMenuMobileSubmenuToggle = {\n    attach: function (context, settings) {\n      var $menuItems = $('.we-mega-menu-li.with-submenu', context);\n      var $links = $('> a.we-mega-menu-li, > span.we-megamenu-nolink', $menuItems);\n\n      if ($links.length) {\n        var blockContentClass = '.we-mega-menu-submenu';\n        var $mainNavbar = $('.main-navbar');\n\n        $links.each(function() {\n          var $thisLink = $(this);\n          $thisLink.toggleClass('open', $thisLink.parent().is('.active'));\n\n          // The item can be <a> tag or just a <span> if no link available - then the whole <span> is a toggler.\n          var $expander = $thisLink;\n          var $collapser = $thisLink.is('a') ? $thisLink.find('.d-submenu-toggler') : $thisLink;\n\n          $expander.click(function () {\n            var $linkItem = $(this);\n            if ($linkItem.is('a.open') || $mainNavbar.is(':not(.show)')) {\n              return true;\n            }\n            $linkItem.toggleClass('open').next(blockContentClass).find('> .we-mega-menu-submenu-inner').slideToggle('medium', function () {\n              if ($(this).is(':hidden')) {\n                $clearStyling = true;\n              }\n            });\n\n            return false;\n          });\n\n          $collapser.click(function() {\n            if ($mainNavbar.is(':not(.show)')) {\n              return true;\n            }\n            var $linkItem = $(this);\n            if ($linkItem.is('.d-submenu-toggler')) {\n              $linkItem = $linkItem.parent();\n            }\n            $linkItem.toggleClass('open').next(blockContentClass).find('> .we-mega-menu-submenu-inner').slideToggle('medium', function () {\n              if ($(this).is(':hidden')) {\n                $clearStyling = true;\n              }\n            });\n\n            return false;\n          });\n        });\n      }\n    }\n  };\n\n  Drupal.behaviors.mainMenuDeepActiveTrail = {\n    attach: function (context, settings) {\n      var $menu = $('nav.navbar', context);\n\n      if (window.location.pathname == '/') {\n        return false;\n      }\n      $menu.find('a[href$=\"' + window.location.pathname + '\"]').each(function() {\n        var $matchingLinkTag = $(this);\n        $matchingLinkTag.addClass('active-menu-item');\n        // Some links are placed in basic submenus.\n        $matchingLinkTag.parents('.we-mega-menu-li.with-submenu').addClass('active-trail open');\n        // Some links are placed in mega menu blocks.\n        $matchingLinkTag.parents('.type-of-block').addClass('active-trail open');\n      });\n    }\n  };\n\n  /**\n   * jQuery slideUp method leaves \"display: none\" inline styling.\n   * We need to remove it if some of menu elements was hidden and\n   * then screen resolution was resized up to minimum 992px to make\n   * them visible again.\n   *\n   * @type {{attach: Drupal.behaviors.unsetHiddenNavElements.attach}}\n   */\n  Drupal.behaviors.unsetHiddenNavElements = {\n    attach: function (context, settings) {\n      var $menu = $('nav.navbar', context);\n      $(window).resize(function() {\n        if (window.innerWidth > 992 && $clearStyling) {\n          $menu.find('[style*=\"display: none\"]').removeAttr('style');\n          $clearStyling = false;\n        }\n      });\n    }\n  };\n\n})(jQuery, Drupal);\n"],"names":["$","Drupal","$clearStyling","behaviors","mainMenuMobileOperations","attach","context","settings","$block","$titles","length","click","window","innerWidth","this","toggleClass","parent","find","slideToggle","is","mainMenuMobileNavbarListener","hasClass","stop","animate","scrollTop","attr","e","$clickTarget","target","parents","mainMenuMobileSubmenuToggle","blockContentClass","$mainNavbar","$menuItems","$links","each","$thisLink","$expander","$collapser","$linkItem","next","mainMenuDeepActiveTrail","$menu","location","pathname","$matchingLinkTag","addClass","unsetHiddenNavElements","resize","removeAttr","jQuery"],"mappings":"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"}