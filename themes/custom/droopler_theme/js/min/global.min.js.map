{"version":3,"file":"global.min.js","sources":["global.js"],"sourcesContent":["/**\n * @file\n * Global utilities.\n *\n */\n(function ($, Drupal) {\n\n  \"use strict\";\n\n  Drupal.behaviors.droopler_theme = {\n    attach: function (context, settings) {\n      var $body = $('body');\n      if ($body.hasClass('d-theme-preceded')) {\n        return;\n      }\n      $(window).once('d_global_scrolled').scroll(function() {\n        if ($(this).scrollTop() > 50) {\n          $(\"body\").addClass(\"scrolled\");\n        }\n        else{\n          $(\"body\").removeClass(\"scrolled\");\n        }\n      });\n\n      $( window ).once('d_global_resize').resize(function() {\n        clampTitle();\n      });\n      clampTitle();\n\n      /**\n       * Triger title to 2 lines and add ... .\n       */\n      function clampTitle() {\n        var containers = document.querySelectorAll('.product-teaser-content .node__title');\n        Array.prototype.forEach.call(containers, function (container) {\n          var p = container.querySelector('span');\n          var divh = container.clientHeight;\n          while (p.offsetHeight > divh) {\n            p.textContent = p.textContent.replace(/\\W*\\s(\\S)*$/, '...');\n          }\n        });\n      }\n\n      // Enable hover on dropdowns.\n      $(\"#header .dropdown, .language-switcher-language-url\").hover(function() {\n        // We don't manipulate on default \"show\" class here.\n        // Using additional class prevents mobile bugs.\n        $(this).addClass(\"force-show\");\n        $(this).find(\".dropdown-menu\").addClass(\"force-show\");\n      }, function() {\n        // On hover out remove also default \"show\" class.\n        $(this).removeClass(\"force-show\").removeClass(\"show\");\n        $(this).find(\".dropdown-menu\").removeClass(\"force-show\").removeClass(\"show\");\n      });\n\n      // Prevent hover on touch devices - revert to default behavior.\n      $('.menu-dropdown-icon').on({ 'touchstart' : function(){\n        $(this).parent().removeClass('force-show');\n        $(this).parent().find(\".dropdown-menu\").removeClass('force-show');\n      } });\n      $body.addClass(\"d-theme-preceded\");\n    }\n  };\n\n  /**\n   * Calculates first paragraph padding for header with cta page layout.\n   *\n   * @type {{ attach: Drupal.behaviors.droopler_cta_header.attach }}\n   */\n  Drupal.behaviors.droopler_cta_header = {\n    attach: function (context, settings) {\n\n      var paragraphPaddingObserver = function ($element) {\n\n        var paragraphPaddingApp = {\n          getExtendedPaddingElement: function () {\n            return $('.hanging-header');\n          },\n          getExtendedPaddingElementOffset: function () {\n            var element = this.getExtendedPaddingElement();\n\n            return element.offset().top + this.getExtendedPaddingElementHeight();\n          },\n          getExtendedPaddingElementHeight: function () {\n            var $extendedElement = this.getExtendedPaddingElement();\n            var extendedElementSizing = Math.ceil($extendedElement.outerHeight() + $extendedElement.position().top);\n\n            var sizingCompare = extendedElementSizing - parseInt($extendedElement.css('padding-bottom'));\n\n            return sizingCompare > 0 ? sizingCompare : 0;\n          },\n          getElementPadding: function () {\n            var $clonedElement = $element.clone();\n\n            $clonedElement\n              .prop('style', '')\n              .css({\n                'position': 'absolute',\n                'z-index': -9999,\n                'top': -9999,\n                'left': -9999,\n              })\n              .appendTo($element.parent());\n\n            var clonedElementPadding = $clonedElement.css('padding-top');\n            $clonedElement.remove();\n\n            return parseFloat(clonedElementPadding);\n          },\n          isExtendedPaddingApplicable: function () {\n            return $element.offset().top < 2 * this.getExtendedPaddingElementOffset();\n          },\n          getCombinedPaddingCssValue: function () {\n            return this.getElementPadding() + this.getExtendedPaddingElementHeight() + 'px';\n          },\n          run: function () {\n            var header = this.getExtendedPaddingElement();\n\n            if (header.length  && $element.length) {\n              if (this.isExtendedPaddingApplicable()) {\n                $element.css('padding-top', this.getCombinedPaddingCssValue());\n                return this;\n              }\n              $element.removeAttr('style');\n            }\n\n            return this;\n          }\n        }\n\n        return paragraphPaddingApp.run();\n      };\n\n      var eventName = 'calculateDynamicHeaderOffset';\n\n      $(window)\n        .once(eventName)\n        .bind(eventName, Drupal.debounce(function () {\n          var firstParagraph = $('.paragraph-sections section:first > .paragraph:first');\n          var elementToObserve = firstParagraph;\n\n          if (firstParagraph.parent().find('.content-moved-inside .content-inside-wrapper').length) {\n            elementToObserve = firstParagraph.find('.content-inside-wrapper');\n          }\n          else if (firstParagraph.find('.expandable-content .list-item-wrapper').length) {\n            if (!firstParagraph.hasClass('d-p-group-of-text-blocks') && !firstParagraph.hasClass('d-p-carousel')) {\n              firstParagraph.find('.expandable-content .list-item-wrapper .paragraph').each(function () {\n                paragraphPaddingObserver($(this));\n              });\n\n              return;\n            }\n          }\n\n          paragraphPaddingObserver(elementToObserve);\n        }, 300));\n\n      $(window).on('resize',function () {\n        $(this).trigger(eventName);\n      }).trigger(eventName);\n    }\n  }\n\n  /**\n   * Adds additional div above the unpublished content.\n   * @type {{attach: Drupal.behaviors.droopler_unpublished.attach}}\n   */\n  Drupal.behaviors.droopler_unpublished = {\n    attach: function (context, settings) {\n      $('<div>').addClass('unpublished-message').text(Drupal.t('Unpublished')).insertBefore($('.node--unpublished', context));\n    }\n  };\n\n  /**\n   * Initialize tooltip.\n   * @type {{attach: Drupal.behaviors.droopler_tooltip.attach}}\n   */\n  Drupal.behaviors.droopler_tooltip = {\n    attach: function (context, settings) {\n      $('[data-toggle=\"tooltip\"]').tooltip();\n    }\n  };\n\n  /**\n   * Initialize popovers.\n   * @type {{attach: Drupal.behaviors.droopler_popover.attach}}\n   */\n  Drupal.behaviors.droopler_popover = {\n    attach: function (context, settings) {\n      $('[data-toggle=\"popover\"]').popover();\n    }\n  };\n\n})(jQuery, Drupal);\n"],"names":["$","Drupal","behaviors","droopler_theme","attach","context","settings","$body","clampTitle","containers","document","querySelectorAll","Array","prototype","forEach","call","container","p","querySelector","divh","clientHeight","offsetHeight","textContent","replace","hasClass","window","once","scroll","this","scrollTop","addClass","removeClass","resize","hover","find","on","touchstart","parent","droopler_cta_header","paragraphPaddingObserver","$element","getExtendedPaddingElement","getExtendedPaddingElementOffset","offset","top","getExtendedPaddingElementHeight","$extendedElement","sizingCompare","Math","ceil","outerHeight","position","parseInt","css","getElementPadding","$clonedElement","clone","clonedElementPadding","prop","z-index","left","appendTo","remove","parseFloat","isExtendedPaddingApplicable","getCombinedPaddingCssValue","run","length","removeAttr","eventName","bind","debounce","firstParagraph","elementToObserve","each","trigger","droopler_unpublished","text","t","insertBefore","droopler_tooltip","tooltip","droopler_popover","popover","jQuery"],"mappings":"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"}