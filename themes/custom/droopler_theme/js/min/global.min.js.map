{"version":3,"file":"global.min.js","sources":["global.js"],"sourcesContent":["/**\n * @file\n * Global utilities.\n *\n */\n(function ($, Drupal) {\n\n  \"use strict\";\n\n  Drupal.behaviors.droopler_theme = {\n    attach: function (context, settings) {\n      var $body = $('body');\n      if ($body.hasClass('d-theme-preceded')) {\n        return;\n      }\n      $(window).once('d_global_scrolled').scroll(function() {\n        if ($(this).scrollTop() > 50) {\n          $(\"body\").addClass(\"scrolled\");\n        }\n        else{\n          $(\"body\").removeClass(\"scrolled\");\n        }\n      });\n\n      $( window ).once('d_global_resize').resize(function() {\n        clampTitle();\n      });\n      clampTitle();\n\n      /**\n       * Triger title to 2 lines and add ... .\n       */\n      function clampTitle() {\n        var containers = document.querySelectorAll('.product-teaser-content .node__title');\n        Array.prototype.forEach.call(containers, function (container) {\n          var p = container.querySelector('span');\n          var divh = container.clientHeight;\n          while (p.offsetHeight > divh) {\n            p.textContent = p.textContent.replace(/\\W*\\s(\\S)*$/, '...');\n          }\n        });\n      }\n\n      // Enable hover on dropdowns.\n      $(\"#header .dropdown, .language-switcher-language-url\").hover(function() {\n        // We don't manipulate on default \"show\" class here.\n        // Using additional class prevents mobile bugs.\n        $(this).addClass(\"force-show\");\n        $(this).find(\".dropdown-menu\").addClass(\"force-show\");\n      }, function() {\n        // On hover out remove also default \"show\" class.\n        $(this).removeClass(\"force-show\").removeClass(\"show\");\n        $(this).find(\".dropdown-menu\").removeClass(\"force-show\").removeClass(\"show\");\n      });\n\n      // Prevent hover on touch devices - revert to default behavior.\n      $('.menu-dropdown-icon').on({ 'touchstart' : function(){\n        $(this).parent().removeClass('force-show');\n        $(this).parent().find(\".dropdown-menu\").removeClass('force-show');\n      } });\n      $body.addClass(\"d-theme-preceded\");\n    }\n  };\n\n  /**\n   * Calculates first paragraph padding for header with cta page layout.\n   *\n   * @type {{ attach: Drupal.behaviors.droopler_cta_header.attach }}\n   */\n  Drupal.behaviors.droopler_cta_header = {\n    attach: function (context, settings) {\n\n      var paragraphPaddingObserver = function ($element) {\n\n        var paragraphPaddingApp = {\n          getExtendedPaddingElement: function () {\n            return $('.hanging-header');\n          },\n          getExtendedPaddingElementOffset: function () {\n            var element = this.getExtendedPaddingElement();\n\n            return element.offset().top + this.getExtendedPaddingElementHeight();\n          },\n          getExtendedPaddingElementHeight: function () {\n            var $extendedElement = this.getExtendedPaddingElement();\n            var extendedElementSizing = Math.ceil($extendedElement.outerHeight() + $extendedElement.position().top);\n\n            var sizingCompare = extendedElementSizing - parseInt($extendedElement.css('padding-bottom'));\n\n            return sizingCompare > 0 ? sizingCompare : 0;\n          },\n          getElementPadding: function () {\n            var $clonedElement = $element.clone();\n\n            $clonedElement\n              .prop('style', '')\n              .css({\n                'position': 'absolute',\n                'z-index': -9999,\n                'top': -9999,\n                'left': -9999,\n              })\n              .appendTo($element.parent());\n\n            var clonedElementPadding = $clonedElement.css('padding-top');\n            $clonedElement.remove();\n\n            return parseFloat(clonedElementPadding);\n          },\n          isExtendedPaddingApplicable: function () {\n            return $element.offset().top < 2 * this.getExtendedPaddingElementOffset();\n          },\n          getCombinedPaddingCssValue: function () {\n            return this.getElementPadding() + this.getExtendedPaddingElementHeight() + 'px';\n          },\n          run: function () {\n            var header = this.getExtendedPaddingElement();\n\n            if (header.length  && $element.length) {\n              if (this.isExtendedPaddingApplicable()) {\n                $element.css('padding-top', this.getCombinedPaddingCssValue());\n                return this;\n              }\n              $element.removeAttr('style');\n            }\n\n            return this;\n          }\n        }\n\n        return paragraphPaddingApp.run();\n      };\n\n      var eventName = 'calculateDynamicHeaderOffset';\n\n      $(window)\n        .once(eventName)\n        .bind(eventName, Drupal.debounce(function () {\n          var firstParagraph = $('.paragraph-sections section:first > .paragraph:first');\n          var elementToObserve = firstParagraph;\n\n          if (firstParagraph.parent().find('.content-moved-inside .content-inside-wrapper').length) {\n            elementToObserve = firstParagraph.find('.content-inside-wrapper');\n          }\n          else if (firstParagraph.find('.expandable-content .list-item-wrapper').length) {\n            if (!firstParagraph.hasClass('d-p-group-of-text-blocks') && !firstParagraph.hasClass('d-p-carousel')) {\n              firstParagraph.find('.expandable-content .list-item-wrapper .paragraph').each(function () {\n                paragraphPaddingObserver($(this));\n              });\n\n              return;\n            }\n          }\n\n          paragraphPaddingObserver(elementToObserve);\n        }, 300));\n\n      $(window).on('resize',function () {\n        $(this).trigger(eventName);\n      }).trigger(eventName);\n    }\n  }\n\n  /**\n   * Adds additional div above the unpublished content.\n   * @type {{attach: Drupal.behaviors.droopler_unpublished.attach}}\n   */\n  Drupal.behaviors.droopler_unpublished = {\n    attach: function (context, settings) {\n      $('<div>').addClass('unpublished-message').text(Drupal.t('Unpublished')).insertBefore($('.node--unpublished', context));\n    }\n  };\n\n  /**\n   * Initialize tooltip.\n   * @type {{attach: Drupal.behaviors.droopler_tooltip.attach}}\n   */\n  Drupal.behaviors.droopler_tooltip = {\n    attach: function (context, settings) {\n      $('[data-toggle=\"tooltip\"]').tooltip();\n    }\n  };\n\n  /**\n   * Initialize popovers.\n   * @type {{attach: Drupal.behaviors.droopler_popover.attach}}\n   */\n  Drupal.behaviors.droopler_popover = {\n    attach: function (context, settings) {\n      $('[data-toggle=\"popover\"]').popover();\n    }\n  };\n\n})(jQuery, Drupal);\n"],"names":["$","Drupal","behaviors","droopler_theme","attach","context","settings","$body","clampTitle","containers","document","querySelectorAll","Array","prototype","forEach","call","container","p","querySelector","divh","clientHeight","offsetHeight","textContent","replace","hasClass","window","once","scroll","this","scrollTop","addClass","removeClass","resize","hover","find","on","touchstart","parent","droopler_cta_header","paragraphPaddingObserver","$element","getExtendedPaddingElement","getExtendedPaddingElementOffset","offset","top","getExtendedPaddingElementHeight","$extendedElement","sizingCompare","Math","ceil","outerHeight","position","parseInt","css","getElementPadding","$clonedElement","clone","clonedElementPadding","prop","z-index","left","appendTo","remove","parseFloat","isExtendedPaddingApplicable","getCombinedPaddingCssValue","run","length","removeAttr","eventName","bind","debounce","firstParagraph","elementToObserve","each","trigger","droopler_unpublished","text","t","insertBefore","droopler_tooltip","tooltip","droopler_popover","popover","jQuery"],"mappings":"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"}